<section id="mini-game">
<h2>Mini Oyun: D√º≈üen Yƒ±ldƒ±zlarƒ± Yakala!</h2>
<div style="text-align:center; margin-bottom:15px;" id="control-buttons">
  <button id="start-btn" class="control-btn">Oyunu Ba≈ülat</button>
  <button id="stop-btn" class="control-btn">Oyunu Durdur</button>
</div>
<p>
Seviye: <span id="level-display">1</span> | 
Puan: <span id="score-display">0</span> | 
Para: <span id="money-display">100</span> | 
Kalan S√ºre: <span id="time-display">30</span>s
</p>
<div id="game-area">
  <div id="player"></div>
  <div id="game-overlay">
    <div id="overlay-message">Kaybettiniz üò¢</div>
    <button id="restart-btn">Yeniden Ba≈ülat</button>
  </div>
</div>

<h3 style="text-align:center;margin-top:20px;">Shop / D√ºkkan</h3>
<div id="shop">
  <div class="shop-item locked" data-cost="5" onclick="buyCostume(this)">Mavi Kost√ºm - 5 Para</div>
  <div class="shop-item locked" data-cost="10" onclick="buyCostume(this)">Ye≈üil Kost√ºm - 10 Para</div>
  <div class="shop-item locked" data-cost="15" onclick="buyCostume(this)">Turuncu Kost√ºm - 15 Para</div>
  <div class="shop-item locked" data-cost="20" onclick="buyCostume(this)">Mor Kost√ºm - 20 Para</div>
  <div class="shop-item" data-cost="0" onclick="selectCostume('≈üapka')">≈ûapka</div>
</div>
</section>

<script>
const player=document.getElementById('player');
const gameArea=document.getElementById('game-area');
const scoreDisplay=document.getElementById('score-display');
const levelDisplay=document.getElementById('level-display');
const moneyDisplay=document.getElementById('money-display');
const timeDisplay=document.getElementById('time-display');
const overlay=document.getElementById('game-overlay');
const overlayMessage=document.getElementById('overlay-message');
const startBtn=document.getElementById('start-btn');
const stopBtn=document.getElementById('stop-btn');
const restartBtn=document.getElementById('restart-btn');

let score=0,level=1,time=30,gameActive=false,fallingObjects=[],playerSpeed=10;

function startGame(){
  gameActive=true;
  overlay.style.display='none';
  score=0;level=1;time=30;
  scoreDisplay.textContent=score;
  levelDisplay.textContent=level;
  timeDisplay.textContent=time;
  fallingObjects=[];
  spawnFallingObject();
}

function stopGame(){
  gameActive=false;
  overlay.style.display='flex';
  overlayMessage.textContent='Oyun Durduruldu ‚è∏Ô∏è';
}

function restartGame(){
  overlay.style.display='none';
  startGame();
}

// Oyuncuyu hareket ettirme
document.addEventListener('keydown', e=>{
  if(!gameActive) return;
  let left=parseInt(player.style.left || 175);
  if(e.key==='ArrowLeft'){left-=playerSpeed;}
  if(e.key==='ArrowRight'){left+=playerSpeed;}
  if(left<0) left=0;
  if(left>350) left=350;
  player.style.left=left+'px';
});

// Falling Objects
function spawnFallingObject(){
  if(!gameActive) return;
  const obj=document.createElement('div');
  obj.classList.add('star');
  obj.style.left=Math.floor(Math.random()*370)+'px';
  obj.style.top='0px';
  gameArea.appendChild(obj);
  fallingObjects.push(obj);
  moveFallingObject(obj);
  setTimeout(spawnFallingObject,1500 - level*100);
}

function moveFallingObject(obj){
  if(!gameActive) return;
  let top=parseInt(obj.style.top);
  const interval=setInterval(()=>{
    if(!gameActive){clearInterval(interval); return;}
    top+=2 + level; 
    obj.style.top=top+'px';
    // √áarpƒ±≈üma kontrol√º
    const playerRect=player.getBoundingClientRect();
    const objRect=obj.getBoundingClientRect();
    if(!(playerRect.right<objRect.left || playerRect.left>objRect.right || playerRect.bottom<objRect.top || playerRect.top>objRect.bottom)){
      score+=10;
      scoreDisplay.textContent=score;
      obj.remove();
      clearInterval(interval);
      // Seviye atlama
      if(score>=level*50 && level<10){
        level++;
        levelDisplay.textContent=level;
      } 
    }
    if(top>400){obj.remove(); clearInterval(interval);}
    if(level>=10){endGame(true);}
  },30);
}

// Shop
function buyCostume(item){
  const cost=parseInt(item.dataset.cost);
  if(cost<=100){ // para sabit olduƒüu i√ßin hep alabilir
    item.classList.remove('locked');
    alert(item.textContent+' se√ßildi!');
  } else {
    alert('Yeterli paranƒ±z yok!');
  }
}
function selectCostume(name){alert(name+' se√ßildi!');}

// Game Over
function endGame(win=false){
  gameActive=false;
  overlay.style.display='flex';
  overlayMessage.textContent=win?'Kazandƒ±nƒ±z üéâ':'Kaybettiniz üò¢';
}

startBtn.addEventListener('click',startGame);
stopBtn.addEventListener('click',stopGame);
restartBtn.addEventListener('click',restartGame);
</script>

