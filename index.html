<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Yƒ±lmaz Karabulut - Oyun Sitesi</title>
<style>
  body { font-family: Arial, sans-serif; background:#000; color:#fff; margin:0; padding:0; text-align:center; }
  h1, h2, h3 { color:#0d6efd; }

  /* Oyun alanƒ± */
  #game-area {
    position:relative;
    width:90%;
    max-width:400px;
    height:400px;
    background:#111;
    border:2px solid #0d6efd;
    margin:20px auto;
    overflow:hidden;
    border-radius:10px;
  }
  #player {
    position:absolute;
    bottom:10px;
    left:50%;
    transform:translateX(-50%);
    width:50px; height:50px;
    background:lime; border-radius:50%;
  }
  .falling { position:absolute; top:0; width:30px; height:30px; border-radius:50%; }
  .coin { background:gold; }
  .enemy { background:red; }

  /* Saƒülƒ±k barƒ± */
  .health-bar { width:100%; background:#555; height:20px; border-radius:10px; overflow:hidden; margin-bottom:10px; }
  .health-inner { width:100%; height:100%; background:red; }

  /* Kontroller */
  #control-buttons { margin-top:10px; }
  .control-btn { padding:10px 20px; margin:5px; font-size:16px; border:none; border-radius:8px; background:#0d6efd; color:#fff; cursor:pointer; }
  .control-btn:active { background:#0a58ca; }

  /* Mobil y√∂n tu≈ülarƒ± */
  #mobile-controls {
    display:flex; justify-content:center; gap:20px;
    margin-top:10px;
  }
  .mobile-btn {
    width:60px; height:60px;
    font-size:24px;
    border:none; border-radius:50%;
    background:#0d6efd; color:#fff; cursor:pointer;
  }
  .mobile-btn:active { background:#0a58ca; }

  /* Shop */
  #shop { margin:20px auto; padding:10px; border:2px solid #0d6efd; border-radius:10px; width:90%; max-width:400px; }
  #shop button { margin:5px; padding:10px; border:none; border-radius:5px; cursor:pointer; background:#28a745; color:#fff; }
  #shop button:disabled { background:#555; cursor:not-allowed; }

  /* Global skor tablosu */
  #leaderboard { margin:20px; flex:1; }
  #leaderboard-table { width:100%; border-collapse:collapse; margin-top:10px; }
  #leaderboard-table th, #leaderboard-table td {
    border:1px solid #0d6efd; padding:5px;
  }

  /* Responsive d√ºzen */
  #game-container { display:flex; flex-wrap:wrap; justify-content:center; }
  #game-wrapper { flex:1; min-width:300px; }

  /* Overlay */
  #game-overlay {
    position:absolute; top:0; left:0; width:100%; height:100%;
    background:rgba(0,0,0,0.85); color:#fff;
    display:flex; flex-direction:column; justify-content:center; align-items:center;
    font-size:2em; border-radius:10px; display:none;
  }
</style>
</head>
<body>

<!-- Oyuncu adƒ± giri≈üi -->
<div id="name-screen" style="position:fixed;top:0;left:0;width:100%;height:100%;background:#000;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:500;">
  <h2 style="color:#fff;">Oyuncu Adƒ±nƒ±zƒ± Girin</h2>
  <input type="text" id="player-name-input" placeholder="ƒ∞sminizi yazƒ±n" style="padding:10px;font-size:16px;">
  <button id="save-name-btn" style="margin-top:10px;padding:10px 20px;background:#0d6efd;color:#fff;border:none;border-radius:5px;cursor:pointer;">Ba≈üla</button>
</div>

<h1>Yƒ±lmaz Karabulut'un Oyun Sitesi</h1>

<div id="game-container">
  <div id="game-wrapper">
    <div id="game-area">
      <div id="player"></div>
      <div id="game-overlay">
        <div id="overlay-message">Kaybettiniz üò¢</div>
        <button id="restart-btn">Yeniden Ba≈ülat</button>
      </div>
    </div>
    <div class="health-bar"><div id="health-inner" class="health-inner"></div></div>
    <p>Puan: <span id="score-display">0</span> | Para: <span id="money-display">100</span> | Zaman: <span id="time-display">0</span>s</p>
    <div id="control-buttons">
      <button id="start-btn" class="control-btn">Oyunu Ba≈ülat</button>
      <button id="stop-btn" class="control-btn">Durdur</button>
    </div>
    <div id="mobile-controls">
      <button id="left-btn" class="mobile-btn">‚óÄ</button>
      <button id="right-btn" class="mobile-btn">‚ñ∂</button>
    </div>
    <div id="shop">
      <h3>Shop</h3>
      <button onclick="buyItem('≈ûapka',50,'blue')">≈ûapka (50)</button>
      <button onclick="buyItem('Altƒ±n Kost√ºm',150,'gold')">Altƒ±n Kost√ºm (150)</button>
      <button onclick="buyItem('Elmas Kost√ºm',300,'cyan')">Elmas Kost√ºm (300)</button>
      <button onclick="buyItem('Siyah Kost√ºm',500,'black')">Siyah Kost√ºm (500)</button>
    </div>
  </div>
  <div id="leaderboard">
    <h3>üåç Global Skor Tablosu</h3>
    <table id="leaderboard-table">
      <tr><th>Sƒ±ra</th><th>ƒ∞sim</th><th>Skor</th></tr>
    </table>
  </div>
</div>

<audio id="hit-sound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
<audio id="gameover-sound" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>

<script>
let player=document.getElementById('player');
let gameArea=document.getElementById('game-area');
let scoreDisplay=document.getElementById('score-display');
let moneyDisplay=document.getElementById('money-display');
let timeDisplay=document.getElementById('time-display');
let overlay=document.getElementById('game-overlay');
let overlayMessage=document.getElementById('overlay-message');
let restartBtn=document.getElementById('restart-btn');
let startBtn=document.getElementById('start-btn');
let stopBtn=document.getElementById('stop-btn');
let healthInner=document.getElementById('health-inner');
let hitSound=document.getElementById('hit-sound');
let gameOverSound=document.getElementById('gameover-sound');

let score=0,money=100,time=0,health=100,gameActive=false,fallingObjects=[],difficultyMultiplier=1;
let playerName="";
let globalScores=JSON.parse(localStorage.getItem("globalScores")||"[]");

// Oyuncu adƒ± al
document.getElementById("save-name-btn").addEventListener("click",()=>{
  const input=document.getElementById("player-name-input").value.trim();
  if(input===""){alert("L√ºtfen isminizi girin!");return;}
  playerName=input;
  document.getElementById("name-screen").style.display="none";
  renderLeaderboard();
});

// Skor kaydet
function saveScore(newScore){
  let existing=globalScores.find(s=>s.name===playerName);
  if(existing){ if(newScore>existing.score){ existing.score=newScore; } }
  else{ globalScores.push({name:playerName,score:newScore}); }
  globalScores.sort((a,b)=>b.score-a.score);
  globalScores=globalScores.slice(0,10);
  localStorage.setItem("globalScores",JSON.stringify(globalScores));
  renderLeaderboard();
}

// Tabloyu g√ºncelle
function renderLeaderboard(){
  const table=document.getElementById("leaderboard-table");
  table.innerHTML="<tr><th>Sƒ±ra</th><th>ƒ∞sim</th><th>Skor</th></tr>";
  globalScores.forEach((s,i)=>{
    table.innerHTML+=`<tr><td>${i+1}</td><td>${s.name}</td><td>${s.score}</td></tr>`;
  });
}

// Oyun ba≈ülat
function startGame(){
  if(gameActive) return;
  gameActive=true;score=0;money=100;time=0;health=100;difficultyMultiplier=1;
  scoreDisplay.textContent=score;moneyDisplay.textContent=money;timeDisplay.textContent=time;
  healthInner.style.width="100%";overlay.style.display="none";
  spawnObject();startTimer();
}
function stopGame(){gameActive=false;fallingObjects.forEach(o=>o.remove());fallingObjects=[];}
function restartGame(){stopGame();startGame();}

// Objeler
function spawnObject(){
  if(!gameActive) return;
  let obj=document.createElement('div');
  obj.classList.add('falling');
  if(Math.random()>0.3){ obj.classList.add('coin'); }
  else{ obj.classList.add('enemy'); }
  obj.style.left=Math.random()*(gameArea.offsetWidth-30)+'px';
  gameArea.appendChild(obj); fallingObjects.push(obj);
  let speed=2*difficultyMultiplier;
  let interval=setInterval(()=>{
    if(!gameActive){obj.remove();clearInterval(interval);return;}
    let top=(parseInt(obj.style.top)||0)+speed;
    obj.style.top=top+'px';
    const playerRect=player.getBoundingClientRect();
    const objRect=obj.getBoundingClientRect();
    if(!(playerRect.right<objRect.left||playerRect.left>objRect.right||playerRect.bottom<objRect.top||playerRect.top>objRect.bottom)){
      if(obj.classList.contains('coin')){score+=10;money+=5;scoreDisplay.textContent=score;moneyDisplay.textContent=money;}
      else{health-=20;hitSound.play();healthInner.style.width=health+'%'; if(health<=0){gameOver();}}
      obj.remove();clearInterval(interval);
    }
    if(top>gameArea.offsetHeight){obj.remove();clearInterval(interval);}
  },30);
  setTimeout(spawnObject,1000/difficultyMultiplier);
}

// Zaman
function startTimer(){
  if(!gameActive) return;
  time++;timeDisplay.textContent=time;difficultyMultiplier+=0.01;
  setTimeout(startTimer,1000);
}

// Game over
function gameOver(){
  overlay.style.display='flex';overlayMessage.textContent='Kaybettiniz üò¢';gameActive=false;
  fallingObjects.forEach(o=>o.remove());fallingObjects=[];gameOverSound.play();
  saveScore(score);
}

// Shop
function buyItem(item,cost,color){
  if(money>=cost){ money-=cost; moneyDisplay.textContent=money; player.style.background=color; }
}

// Klavye kontrolleri
document.addEventListener('keydown',(e)=>{
  if(!gameActive) return;
  let left=parseInt(player.style.left)||gameArea.offsetWidth/2;
  if(e.key==='ArrowLeft'||e.key==='a'||e.key==='A'){ left-=20; }
  if(e.key==='ArrowRight'||e.key==='d'||e.key==='D'){ left+=20; }
  if(left<0) left=0;
  if(left>gameArea.offsetWidth-50) left=gameArea.offsetWidth-50;
  player.style.left=left+'px';
});

// Mobil butonlar
document.getElementById("left-btn").addEventListener("touchstart",()=>moveMobile(-20));
document.getElementById("right-btn").addEventListener("touchstart",()=>moveMobile(20));
function moveMobile(dx){
  if(!gameActive) return;
  let left=parseInt(player.style.left)||gameArea.offsetWidth/2;
  left+=dx;
  if(left<0) left=0;
  if(left>gameArea.offsetWidth-50) left=gameArea.offsetWidth-50;
  player.style.left=left+'px';
}

// Butonlar
startBtn.addEventListener('click',startGame);
stopBtn.addEventListener('click',stopGame);
restartBtn.addEventListener('click',restartGame);
</script>

</body>
</html>
