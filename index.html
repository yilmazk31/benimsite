<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Yılmaz Karabulut - Oyun Sitesi</title>
<style>
body { font-family: Arial, sans-serif; background:#000; color:#fff; margin:0; padding:0; text-align:center; }
h1,h2,h3 { color:#0d6efd; }
#game-area { position:relative; width:90%; max-width:400px; height:400px; background:#111; border:2px solid #0d6efd; margin:20px auto; overflow:hidden; border-radius:10px; }
#player { position:absolute; bottom:10px; left:175px; width:50px; height:50px; background:lime; border-radius:50%; transition:left 0.05s linear; }
.falling { position:absolute; top:0; width:30px; height:30px; border-radius:50%; }
.coin { background:gold; box-shadow:0 0 15px gold; }
.enemy { background:red; box-shadow:0 0 15px red; }
.bonus { background:cyan; box-shadow:0 0 15px cyan; }
.health-bar { width:100%; background:#555; height:20px; border-radius:10px; margin-bottom:10px; }
.health-inner { width:100%; height:100%; background:red; }
#control-buttons { margin-top:10px; }
.control-btn { padding:10px 20px; margin:5px; font-size:16px; border:none; border-radius:8px; background:#0d6efd; color:#fff; cursor:pointer; }
.control-btn:active { background:#0a58ca; }
#mobile-controls { display:flex; justify-content:center; gap:20px; margin-top:10px; }
.mobile-btn { width:60px; height:60px; font-size:24px; border:none; border-radius:50%; background:#0d6efd; color:#fff; cursor:pointer; }
.mobile-btn:active { background:#0a58ca; }
#shop, #instructions, #about { margin:20px auto; padding:10px; border:2px solid #0d6efd; border-radius:10px; width:90%; max-width:400px; text-align:left; background:#111; }
#shop button { margin:5px; padding:10px; border:none; border-radius:5px; cursor:pointer; background:#28a745; color:#fff; }
#shop button:disabled { background:#555; cursor:not-allowed; }
#leaderboard { margin:20px; flex:1; }
#leaderboard-table { width:100%; border-collapse:collapse; margin-top:10px; }
#leaderboard-table th, #leaderboard-table td { border:1px solid #0d6efd; padding:5px; }
#game-container { display:flex; flex-wrap:wrap; justify-content:center; }
#game-wrapper { flex:1; min-width:300px; }
#game-overlay { position:absolute; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.85); color:#fff; display:flex; flex-direction:column; justify-content:center; align-items:center; font-size:2em; border-radius:10px; display:none; z-index:100; }
#name-screen { position:fixed;top:0;left:0;width:100%;height:100%;background:#000;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:500; }
#name-screen input { padding:10px;font-size:16px; margin-top:10px; }
#name-screen button { margin-top:10px;padding:10px 20px;background:#0d6efd;color:#fff;border:none;border-radius:5px; cursor:pointer; }
</style>
</head>
<body>

<div id="name-screen">
  <h2>Oyuncu Adınızı Girin</h2>
  <input type="text" id="player-name-input" placeholder="İsminizi yazın">
  <button id="save-name-btn">Başla</button>
</div>

<h1>Yılmaz Karabulut'un Gelişmiş Oyun Sitesi</h1>

<div id="game-container">
  <div id="game-wrapper">
    <div id="game-area">
      <div id="player"></div>
      <div id="game-overlay">
        <div id="overlay-message">Kaybettiniz 😢</div>
        <button id="restart-btn">Yeniden Başlat</button>
      </div>
    </div>
    <div class="health-bar"><div id="health-inner" class="health-inner"></div></div>
    <p>Puan: <span id="score-display">0</span> | Para: <span id="money-display">100</span> | Zaman: <span id="time-display">0</span>s</p>
    <div id="control-buttons">
      <button id="stop-btn" class="control-btn">Durdur</button>
    </div>
    <div id="mobile-controls">
      <button id="left-btn" class="mobile-btn">◀</button>
      <button id="right-btn" class="mobile-btn">▶</button>
    </div>
    <div id="shop">
      <h3>Shop</h3>
      <button onclick="buyItem('Şapka',50,'blue')">Şapka (50)</button>
      <button onclick="buyItem('Altın Kostüm',150,'gold')">Altın Kostüm (150)</button>
      <button onclick="buyItem('Elmas Kostüm',300,'cyan')">Elmas Kostüm (300)</button>
      <button onclick="buyItem('Siyah Kostüm',500,'black')">Siyah Kostüm (500)</button>
    </div>
    <div id="instructions">
      <h3>Oyun Talimatları:</h3>
      <ul>
        <li>PC: <b>A</b> ve <b>D</b> tuşları ile hareket edin.</li>
        <li>Mobil: Ekrandaki yön tuşları ile hareket edin.</li>
        <li>Düşen <b>paraları</b> toplayın ve <b>düşmanlardan</b> kaçın.</li>
        <li>Bonus eşyaları yakalayın: ekstra para veya süre yavaşlatma.</li>
        <li>Puan ve para toplayarak shop’dan kostüm satın alın.</li>
        <li>Oyun bitince skorunuz global tabloya kaydedilir.</li>
      </ul>
    </div>
    <div id="about">
      <h3>Hakkında</h3>
      <p>Merhaba! Ben <b>Yılmaz Karabulut</b>. 15 yaşındayım, Akhisar Koleji Fen Lisesi'nde okuyorum. Hobilerim: oyun oynamak ve gezmek.</p>
      <p>Instagram: <a href="https://www.instagram.com/ykk388?igsh=bm5pM3lub3liNzl2&utm_source=qr" target="_blank">ykk388</a></p>
    </div>
  </div>
  <div id="leaderboard">
    <h3>🌍 Global Skor Tablosu</h3>
    <table id="leaderboard-table">
      <tr><th>Sıra</th><th>İsim</th><th>Skor</th></tr>
    </table>
  </div>
</div>

<p style="margin-top:20px;">Destek için: <a href="mailto:yilmazkarabulut@akhisarkoleji.com" style="color:#0d6efd;">yilmazkarabulut@akhisarkoleji.com</a></p>

<audio id="hit-sound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
<audio id="gameover-sound" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>
<audio id="bg-music" src="https://actions.google.com/sounds/v1/ambiences/forest_ambience.ogg" loop></audio>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
let player=document.getElementById('player');
let gameArea=document.getElementById('game-area');
let scoreDisplay=document.getElementById('score-display');
let moneyDisplay=document.getElementById('money-display');
let timeDisplay=document.getElementById('time-display');
let overlay=document.getElementById('game-overlay');
let overlayMessage=document.getElementById('overlay-message');
let restartBtn=document.getElementById('restart-btn');
let stopBtn=document.getElementById('stop-btn');
let healthInner=document.getElementById('health-inner');
let hitSound=document.getElementById('hit-sound');
let gameOverSound=document.getElementById('gameover-sound');
let bgMusic=document.getElementById('bg-music');

let score=0,money=100,time=0,health=100,gameActive=false,fallingObjects=[],difficultyMultiplier=1;
let playerName="", selectedCostume="lime", playerPos=175;

// Firebase yapılandırma (isteğe bağlı doldur)
const firebaseConfig = {
  apiKey: "BURAYA_API_KEY",
  authDomain: "BURAYA_AUTH_DOMAIN",
  databaseURL: "BURAYA_DATABASE_URL",
  projectId: "BURAYA_PROJECT_ID",
  storageBucket: "BURAYA_STORAGE_BUCKET",
  messagingSenderId: "BURAYA_SENDER_ID",
  appId: "BURAYA_APP_ID"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// --- Oyuncu adı ve oyun başlat ---
document.getElementById('save-name-btn').addEventListener('click',()=>{
  let val=document.getElementById('player-name-input').value.trim();
  if(!val) val="Oyuncu"; 
  playerName=val;
  document.getElementById('name-screen').style.display='none';
  startGame();
});

// --- Shop ---
function buyItem(name,cost,color){
  if(money>=cost){
    money-=cost; selectedCostume=color; player.style.backgroundColor=color;
    moneyDisplay.textContent=money;
  }
}

// --- Kontroller ---
let keys={};
document.addEventListener('keydown',e=>{ keys[e.key.toLowerCase()]=true; });
document.addEventListener('keyup',e=>{ keys[e.key.toLowerCase()]=false; });

document.getElementById('left-btn').addEventListener('touchstart',()=>{ keys['a']=true; });
document.getElementById('left-btn').addEventListener('touchend',()=>{ keys['a']=false; });
document.getElementById('right-btn').addEventListener('touchstart',()=>{ keys['d']=true; });
document.getElementById('right-btn').addEventListener('touchend',()=>{ keys['d']=false; });

// --- Başlat/Durdur/Yeniden ---
stopBtn.addEventListener('click',()=>{ gameActive=false; bgMusic.pause(); });
restartBtn.addEventListener('click',()=>{ overlay.style.display='none'; startGame(); });

function startGame(){
  score=0; money=100; time=0; health=100; difficultyMultiplier=1; gameActive=true; fallingObjects=[]; playerPos=175;
  player.style.left=playerPos+'px';
  scoreDisplay.textContent=score; moneyDisplay.textContent=money; timeDisplay.textContent=time;
  healthInner.style.width='100%';
  overlay.style.display='none';
  bgMusic.currentTime=0; bgMusic.play();
  requestAnimationFrame(gameLoop);
}

// --- Oyun Mantığı ---
function spawnObject(){
  let objType=Math.random();
  let obj=document.createElement('div');
  obj.classList.add('falling');
  obj.style.left=Math.random()*370+'px';
  obj.style.top='0px';
  if(objType<0.6) obj.classList.add('coin');
  else if(objType<0.9) obj.classList.add('enemy');
  else obj.classList.add('bonus');
  gameArea.appendChild(obj);
  fallingObjects.push(obj);
}

function createEffect(type,x,y){
  let effect=document.createElement('div');
  effect.style.position='absolute'; effect.style.left=x+'px'; effect.style.top=y+'px';
  effect.style.width='30px'; effect.style.height='30px'; effect.style.borderRadius='50%'; effect.style.pointerEvents='none';
  if(type==='coin'){ effect.style.background='radial-gradient(circle, gold, yellow)'; effect.style.boxShadow='0 0 15px gold'; }
  if(type==='enemy'){ effect.style.background='radial-gradient(circle, red, darkred)'; effect.style.boxShadow='0 0 15px red'; }
  if(type==='bonus'){ effect.style.background='radial-gradient(circle, cyan, deepskyblue)'; effect.style.boxShadow='0 0 15px cyan'; }
  gameArea.appendChild(effect);
  let pos=0; let anim=setInterval(()=>{ effect.style.top=parseInt(effect.style.top)-1+'px'; effect.style.opacity=1-pos/20; pos++; if(pos>20){ clearInterval(anim); effect.remove(); } },16);
}

function gameLoop(){
  if(!gameActive) return;
  time++; timeDisplay.textContent=time;

  if(keys['a'] && playerPos>0) playerPos-=5;
  if(keys['d'] && playerPos<350) playerPos+=5;
  player.style.left=playerPos+'px';

  if(Math.random()<0.02*difficultyMultiplier) spawnObject();

  for(let i=fallingObjects.length-1;i>=0;i--){
    let obj=fallingObjects[i];
    obj.style.top=parseInt(obj.style.top)+2*difficultyMultiplier+'px';
    if(parseInt(obj.style.top)+30>=350 && parseInt(obj.style.left)+30>playerPos && parseInt(obj.style.left)<playerPos+50){
      if(obj.classList.contains('coin')){ score+=10; money+=5; scoreDisplay.textContent=score; moneyDisplay.textContent=money; createEffect('coin',playerPos,340); }
      if(obj.classList.contains('enemy')){ health-=20; hitSound.play(); healthInner.style.width=health+'%'; createEffect('enemy',playerPos,340); }
      if(obj.classList.contains('bonus')){ money+=20; score+=20; scoreDisplay.textContent=score; moneyDisplay.textContent=money; createEffect('bonus',playerPos,340); }
      obj.remove(); fallingObjects.splice(i,1);
    } else if(parseInt(obj.style.top)>400){ obj.remove(); fallingObjects.splice(i,1); }
  }

  if(health<=0){ endGame(); return; }
  difficultyMultiplier+=0.0005;
  requestAnimationFrame(gameLoop);
}

function endGame(){
  gameActive=false;
  overlayMessage.textContent='Kaybettiniz 😢';
  overlay.style.display='flex';
  gameOverSound.play();
  bgMusic.pause();
  // saveScore(); // Firebase aktif değilse yorum yapın
}

// --- Firebase Global Skor ---
// Bu bölüm Firebase ile aktif edilebilir
</script>

</body>
</html>

